# https://blog.csdn.net/cobracanary/article/details/126246695
- app(spark):
    - containers:
        # 1主2从
        # 主
        master:
          image: bitnami/spark
          env:
            SPARK_MODE: master
            SPARK_RPC_AUTHENTICATION_ENABLED: no
            SPARK_RPC_ENCRYPTION_ENABLED: no
            SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED: no
            SPARK_SSL_ENABLED: no
          ports:
            - '8080:8080:8080' # spark UI
            - '7077:7077:7077' # 用于连接spark
          volumes:
            - /data/spark/python:/python # 映射/python目录，用于存放pyspark代码，方便运行
            - /data/spark/input:/input
        # 从
        worker1:
          image: bitnami/spark
          env:
            SPARK_MODE: worker
            SPARK_MASTER_URL: spark://master:7077
            SPARK_WORKER_MEMORY: 1G
            SPARK_WORKER_CORES: 1
            SPARK_RPC_AUTHENTICATION_ENABLED: no
            SPARK_RPC_ENCRYPTION_ENABLED: no
            SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED: no
            SPARK_SSL_ENABLED: no
        # 从
        worker2:
          image: bitnami/spark
          env:
            SPARK_MODE: worker
            SPARK_MASTER_URL: spark://master:7077
            SPARK_WORKER_MEMORY: 1G
            SPARK_WORKER_CORES: 1
            SPARK_RPC_AUTHENTICATION_ENABLED: no
            SPARK_RPC_ENCRYPTION_ENABLED: no
            SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED: no
            SPARK_SSL_ENABLED: no
    # 部署
    - deploy:
        replicas: 1 # 副本数
        nodeSelector: # 节点选择: dict形式
          kubernetes.io/hostname: hww-pc
        hosts: # 域名解析
          127.0.0.1:
              - master


