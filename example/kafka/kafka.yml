- app(kafka):
    - containers:
        zookeeper:
          image: wurstmeister/zookeeper
          env:
            TZ: Asia/Shanghai
          ports:
            - "2181:2181"
          volumes:
            - /data/zookeeper/:/opt/zookeeper-3.4.13/data:rw
        kafka:
          image: wurstmeister/kafka:2.13-2.7.0
          ports:
            - "9092:9092"
          env:
            TZ: Asia/Shanghai
            HOSTNAME: kfk
            KAFKA_ADVERTISED_HOST_NAME: ${ref_pod_field(metadata.name)} # pod name
            KAFKA_CREATE_TOPICS: "REFUND_APPLY:1:1,REFUND_CANCEL:1:1,REFUND_APPLY_AGREE:1:1,REFUND_APPLY_REFUSE:1:1,SYNC_ORDER_APPLY:1:1,SYNC_ORDER_RESULT:1:1,SYNC_GOODS_APPLY:1:1"
            KAFKA_ZOOKEEPER_CONNECT: localhost:2181
          volumes:
            - /data/kafka/:/kafka:rw
        kafka-manager:
          image: sheepkiller/kafka-manager # web管理界面
          env:
              ZK_HOSTS: localhost
          ports:
            - "9100:9000"
    # 部署
    - deploy:
        replicas: 1 # 副本数
        nodeSelector: # 节点选择: dict形式
          kubernetes.io/hostname: hww-pc
